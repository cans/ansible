---
# tasks file for the heroku_app module
# ============================================================
- name: test application present in check mode
  heroku_app:
    app: "{{ heroku_app_name }}"
    state: present
    api_key: "{{ heroku_api_key }}"
  register: result
  check_mode: true
- name: assert changed is True
  assert:
    that:
      - result.changed == True
- name: test application present in check mode (again)
  heroku_app:
    app: "{{ heroku_app_name }}"
    state: present
    api_key: "{{ heroku_api_key }}"
  register: result
  check_mode: true
- name: assert changed is True
  assert:
    that:
      - result.changed == True
# ============================================================
- name: test create application
  heroku_app:
    app: "{{ heroku_app_name }}"
    state: present
    api_key: "{{ heroku_api_key }}"
  register: result
- name: assert changed is True
  assert:
    that:
      - result.changed == True
- name: test create application (again)
  heroku_app:
    app: "{{ heroku_app_name }}"
    state: present
    api_key: "{{ heroku_api_key }}"
  register: result
- name: assert changed is False
  assert:
    that:
      - result.changed == False
# ============================================================
- name: test delete application
  heroku_app:
    app: "{{ heroku_app_name }}"
    state: absent
    api_key: "{{ heroku_api_key }}"
  register: result
- name: assert changed is True
  assert:
    that:
      - result.changed == True